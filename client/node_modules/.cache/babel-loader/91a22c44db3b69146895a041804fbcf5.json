{"ast":null,"code":"import _toConsumableArray from\"C:/Users/grunge/Desktop/mern-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Row,Col,Form,Button,Card,Image,ListGroup,ListGroupItem,NavLink}from'react-bootstrap';import{Link}from'react-router-dom';import{addToCart,removeFromCart}from'../actions/cartAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var productId=match.params.id;var qty=location.search?Number(location.search.split(\"=\")[1]):1;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,qty,productId]);var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var handleCheckout=function handleCheckout(){history.push('/login?redirect=shipping');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(\"h5\",{children:[\"your cart is empty!! \",/*#__PURE__*/_jsx(NavLink,{as:Link,to:\"/\",children:\"Go back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item,index){return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.title})}),/*#__PURE__*/_jsx(Col,{md:2,children:item.price}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(num){return/*#__PURE__*/_jsx(\"option\",{style:{color:'black'},value:num+1,children:num+1},num+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]},index);})})]}),/*#__PURE__*/_jsxs(Col,{md:4,className:\"mt-4\",children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal ( \",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\" ) Items \"]})}),/*#__PURE__*/_jsxs(ListGroupItem,{children:[\"$\",cartItems.reduce(function(accum,item){return accum+item.qty*item.price;},0).toFixed(2)]})]})}),/*#__PURE__*/_jsx(Card,{}),/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:handleCheckout,disabled:cartItems.length===0,children:\"Proceed Checkout\"})]})]});};export default Cart;","map":{"version":3,"sources":["C:/Users/grunge/Desktop/mern-shop/client/src/pages/Cart.jsx"],"names":["React","useEffect","useDispatch","useSelector","Row","Col","Form","Button","Card","Image","ListGroup","ListGroupItem","NavLink","Link","addToCart","removeFromCart","Cart","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","handleCheckout","push","length","map","item","index","image","product","title","price","e","target","value","Array","countInStock","keys","num","color","reduce","acc","accum","toFixed"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport {Row,Col,Form,Button,Card,Image,ListGroup,ListGroupItem,NavLink} from 'react-bootstrap'\r\nimport {Link} from 'react-router-dom'\r\nimport { addToCart,removeFromCart } from '../actions/cartAction'\r\n\r\n\r\nconst Cart = ({match,location,history}) => {\r\n    const productId=match.params.id\r\n    const qty=location.search? Number(location.search.split(\"=\")[1]) :1;\r\n    \r\n    const dispatch=useDispatch()\r\n    useEffect(()=>{\r\n        if(productId){\r\n            dispatch(addToCart(productId,qty))\r\n        }\r\n    },[dispatch,qty,productId])\r\n\r\n    const cart=useSelector((state)=>state.cart)\r\n    const {cartItems}=cart\r\n    const removeFromCartHandler=(id)=>{\r\n        dispatch(removeFromCart(id))\r\n    }\r\n    const handleCheckout=()=>{\r\n        history.push('/login?redirect=shipping')\r\n    }\r\n    \r\n    return (\r\n        \r\n          <Row>\r\n              <Col md={8} >\r\n                  <h2>Shopping Cart</h2>\r\n                  {cartItems.length===0?<h5>your cart is empty!! <NavLink as={Link} to=\"/\">Go back</NavLink>\r\n                  \r\n                  </h5>:(\r\n                    <ListGroup variant=\"flush\">\r\n                        {cartItems.map((item,index)=>(\r\n                            <Row key={index}>\r\n                            <Col md={2} >\r\n                                <Image src={item.image}fluid rounded/>\r\n                            </Col>\r\n                            <Col md={3}><Link to={`/product/${item.product}`}>{item.title}</Link></Col>\r\n                            <Col md={2}>{item.price}</Col>\r\n                            <Col md={2}><Form.Control\r\n                                    as=\"select\"\r\n                                    value={item.qty}\r\n                                    onChange={(e)=>dispatch(addToCart(item.product, Number(e.target.value)))}\r\n                                    >\r\n                                        {[...Array(item.countInStock).keys()].map((num)=>(\r\n                                            <option\r\n                                            style={{color:'black'}} \r\n                                            key={num+1}\r\n                                            value={num+1}\r\n                                            >\r\n                                                {num+1}\r\n                                            </option>\r\n                                        ))}\r\n                                    </Form.Control>\r\n                                </Col>\r\n                                <Col md={2}>\r\n                                <Button type=\"button\" onClick={()=>removeFromCartHandler(item.product)}><i className=\"fas fa-trash\"></i></Button>\r\n                                </Col>\r\n                        </Row>\r\n                        ))\r\n                      }\r\n                          \r\n                    </ListGroup>\r\n                  )}\r\n                </Col> \r\n                <Col md={4} className=\"mt-4\">\r\n                <Card>\r\n                <ListGroup variant=\"flush\">\r\n                <ListGroupItem>\r\n                    <h2>Subtotal ( {cartItems.reduce((acc,item)=> acc + item.qty,0)} ) Items </h2></ListGroupItem>\r\n                    <ListGroupItem>$ \r\n                     {cartItems.reduce((accum, item)=>accum + item.qty * item.price, 0).toFixed(2)}</ListGroupItem>    \r\n                </ListGroup>    \r\n                </Card> \r\n                <Card>\r\n                \r\n                    \r\n                   \r\n                </Card> \r\n                <Button type=\"button\"\r\n                onClick={handleCheckout}\r\n                disabled={cartItems.length===0}>Proceed Checkout</Button>     \r\n                </Col>             \r\n            </Row>  \r\n        \r\n    )\r\n}\r\n\r\nexport default Cart\r\n"]},"metadata":{},"sourceType":"module"}