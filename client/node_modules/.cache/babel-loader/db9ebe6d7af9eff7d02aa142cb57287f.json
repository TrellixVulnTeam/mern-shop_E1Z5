{"ast":null,"code":"import _slicedToArray from\"C:/Users/grunge/Desktop/mern-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{getUserProfile,userUpdateProfile}from'../actions/userAction';import{Form,Row,Col,Button,Container}from'react-bootstrap';import Message from'../components/Message';import Loading from'../components/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];// order list\n//profile update\nvar dispatch=useDispatch();var userProfile=useSelector(function(state){return state.userProfile;});var loading=userProfile.loading,error=userProfile.error,user=userProfile.user;var userLog=useSelector(function(state){return state.userLog;});var userInfo=userLog.userInfo;var userUpdate=useSelector(function(state){return state.userUpdate;});var success=userUpdate.success;console.log(success);useEffect(function(){if(!userInfo){history.push('/login');}else{if(!user.name){dispatch(getUserProfile('profile'));setMessage('profile update successful!');}else{setName(user.name);setEmail(user.email);}}},[history,user,userInfo,dispatch]);var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(userUpdateProfile({id:user._id,name:name,email:email,password:password}));};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Profile\"}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",message:error}),loading&&/*#__PURE__*/_jsx(Loading,{}),success&&/*#__PURE__*/_jsx(Message,{variant:\"success\",message:message}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"your name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmpassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Re-enter Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"confirm password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Update\"})]})]}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"})})]})})});};export default Profile;","map":{"version":3,"sources":["C:/Users/grunge/Desktop/mern-shop/client/src/pages/Profile.jsx"],"names":["React","useState","useEffect","useDispatch","useSelector","getUserProfile","userUpdateProfile","Form","Row","Col","Button","Container","Message","Loading","Profile","history","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","userProfile","state","loading","error","user","userLog","userInfo","userUpdate","success","console","log","push","handleSubmit","e","preventDefault","id","_id","target","value"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {getUserProfile, userUpdateProfile} from '../actions/userAction'\r\nimport {Form, Row, Col, Button,Container} from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport Loading from '../components/Loading'\r\n\r\n\r\nconst Profile = ({history}) => {\r\n\r\n    const [name, setName]=useState('')\r\n    const [email, setEmail]=useState('')\r\n    const [password, setPassword]=useState('')\r\n    const [confirmPassword, setConfirmPassword]=useState('')\r\n    const [message, setMessage]=useState('')\r\n    // order list\r\n    \r\n    //profile update\r\n    const dispatch=useDispatch()\r\n    const userProfile=useSelector((state)=>state.userProfile)\r\n    const{loading, error, user}=userProfile    \r\n    \r\n    const userLog=useSelector(state=>state.userLog)\r\n    const {userInfo}=userLog\r\n\r\n    const userUpdate=useSelector(state=>state.userUpdate)\r\n    const {success}=userUpdate\r\n    console.log(success)\r\n    \r\n    useEffect(()=>{\r\n    if(!userInfo){\r\n        history.push('/login')\r\n    }else{\r\n       if(!user.name){\r\n           dispatch(getUserProfile('profile'))\r\n           setMessage('profile update successful!')\r\n       }else{\r\n           setName(user.name)\r\n           setEmail(user.email)\r\n       }\r\n    }    \r\n},[history,user,userInfo,dispatch])\r\n\r\nconst handleSubmit= (e)=>{\r\n    e.preventDefault()\r\n    dispatch(userUpdateProfile({id:user._id,name, email, password}))\r\n    }\r\n    return (\r\n        <div>\r\n            <Container>\r\n                <Row>\r\n                    <Col md={3}>\r\n                    \r\n                    <h2>Edit Profile</h2>\r\n                    {error&& <Message variant=\"danger\" message={error} />}\r\n                    {loading&& <Loading/>}\r\n                    {success&& <Message variant=\"success\" message={message}/>}\r\n            <Form onSubmit={handleSubmit}>\r\n            <Form.Group controlId=\"name\" >\r\n                    <Form.Label>Name </Form.Label>\r\n                    <Form.Control \r\n                    type=\"text\"\r\n                    placeholder=\"your name\"\r\n                    value={name}\r\n                    onChange={(e)=>setName(e.target.value)}\r\n                    />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"email\" >\r\n                    <Form.Label>Email </Form.Label>\r\n                    <Form.Control \r\n                    type=\"email\"\r\n                    placeholder=\"email\"\r\n                    value={email}\r\n                    onChange={(e)=>setEmail(e.target.value)}\r\n                    />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"password\" >\r\n                    <Form.Label>Password </Form.Label>\r\n                    <Form.Control \r\n                    type=\"password\"\r\n                    placeholder=\"password\"\r\n                    value={password}\r\n                    onChange={(e)=>setPassword(e.target.value)}\r\n                    />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"confirmpassword\" >\r\n                    <Form.Label>Re-enter Password </Form.Label>\r\n                    <Form.Control \r\n                    type=\"password\"\r\n                    placeholder=\"confirm password\"\r\n                    value={confirmPassword}\r\n                    onChange={(e)=>setConfirmPassword(e.target.value)}\r\n                    />\r\n                    \r\n                </Form.Group>\r\n                <Button type=\"submit\">Update</Button>\r\n            </Form>         \r\n        \r\n                    </Col>\r\n                    <Col md={9}>\r\n                        <h2>My Orders</h2>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile\r\n"]},"metadata":{},"sourceType":"module"}