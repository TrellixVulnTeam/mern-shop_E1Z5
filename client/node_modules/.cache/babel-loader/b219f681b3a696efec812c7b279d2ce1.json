{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\grunge\\\\Desktop\\\\mycms\\\\frontend\\\\src\\\\pages\\\\PlaceOrder.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { createOrders } from '../actions/orderAction';\nimport { Row, Col, Button, ListGroup, Image, Card } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PlaceOrder = ({\n  history\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const {\n    adress,\n    city,\n    postalcode,\n    country\n  } = cart.shippingAdress;\n  const createOrder = useSelector(state => state.createOrder);\n  const {\n    order,\n    success,\n    error\n  } = createOrder; //function for decimal\n\n  const addDecimal = num => {\n    return Math.round(num * 100 / 100).toFixed(2);\n  }; //calculation logic for the Order summary\n\n\n  cart.itemPrice = addDecimal(cart.cartItems.reduce((acc, item) => acc + Number(item.price) * Number(item.qty), 0));\n  cart.shippingPrice = addDecimal(cart.cartItems > 100 ? 0 : 5);\n  cart.taxPrice = addDecimal(0.15 * cart.itemPrice);\n  cart.totalPrice = addDecimal(Number(cart.itemPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice));\n  console.log(cart.itemPrice);\n\n  function handleClick() {\n    dispatch(createOrders({\n      orderItems: cart.cartItems,\n      shippingAdress: cart.shippingAdress,\n      paymentMethod: cart.paymentMethod,\n      itemPrice: cart.itemPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice\n    }));\n    history.push(`/order/${order._id}`);\n  }\n\n  useEffect(() => {\n    if (success) {\n      history.push(`/order/${order._id}`);\n    } //eslint-disable-next-line\n\n  }, [history, success]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: [/*#__PURE__*/_jsxDEV(ListGroup, {\n          variant: \"flush\",\n          children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Shipping\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Adress\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 32\n              }, this), adress, \", \", city, \",  \", postalcode, \",  \", country]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Payment Method\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: cart.paymentMethod\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 32\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n          variant: \"flush\",\n          children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Order Items\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this), cart.cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"your Order list is empty!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            children: cart.cartItems.map((item, index) => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  md: 1,\n                  children: /*#__PURE__*/_jsxDEV(Image, {\n                    src: item.image,\n                    alt: item.title,\n                    fluid: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 39\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/products/product/${item.product}`,\n                    children: item.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 72,\n                    columnNumber: 35\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 4,\n                  children: [item.qty, \" X $ \", item.price, \" = $ \", item.qty * item.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 31\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 27\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            variant: \"flush\",\n            children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Order Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: \"Items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [\"$ \", cart.itemPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: \"Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [\"$ \", cart.shippingPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: \"Tax\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [\"$ \", cart.taxPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [\"$ \", cart.totalPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: error && /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\",\n              type: \"button\",\n              onClick: handleClick,\n              disabled: cart.cartItems === 0,\n              children: \"Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(PlaceOrder, \"iNalJxOcTdqmuNV4zxgQFEFGGCw=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = PlaceOrder;\nexport default PlaceOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlaceOrder\");","map":{"version":3,"sources":["C:/Users/grunge/Desktop/mycms/frontend/src/pages/PlaceOrder.jsx"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrders","Row","Col","Button","ListGroup","Image","Card","PlaceOrder","history","dispatch","cart","state","adress","city","postalcode","country","shippingAdress","createOrder","order","success","error","addDecimal","num","Math","round","toFixed","itemPrice","cartItems","reduce","acc","item","Number","price","qty","shippingPrice","taxPrice","totalPrice","console","log","handleClick","orderItems","paymentMethod","push","_id","length","map","index","image","title","product"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {Link} from 'react-router-dom'\r\nimport {createOrders} from '../actions/orderAction'\r\nimport {Row, Col, Button,ListGroup,Image,Card} from 'react-bootstrap'\r\n\r\nconst PlaceOrder = ({history}) => {\r\n\r\n    const dispatch=useDispatch()\r\n    const cart=useSelector(state=>state.cart)      \r\n    const {adress,city,postalcode,country}=cart.shippingAdress\r\n\r\n    const createOrder=useSelector(state=>state.createOrder)\r\n    const {order, success, error}=createOrder\r\n    //function for decimal\r\n    const addDecimal=(num)=>{\r\n        return (Math.round(num * 100 / 100).toFixed(2))\r\n    }\r\n     //calculation logic for the Order summary\r\n    cart.itemPrice=addDecimal(cart.cartItems.reduce((acc,item)=> acc + Number(item.price )* Number(item.qty),0)) \r\n    cart.shippingPrice=addDecimal(cart.cartItems >100 ? 0 : 5)\r\n    cart.taxPrice=addDecimal(0.15 * cart.itemPrice)\r\n    cart.totalPrice=addDecimal(Number(cart.itemPrice)+Number(cart.shippingPrice)+ Number(cart.taxPrice))\r\n    \r\nconsole.log(cart.itemPrice)\r\n    function handleClick(){\r\n        dispatch( createOrders({\r\n            orderItems:cart.cartItems,\r\n            shippingAdress:cart.shippingAdress,\r\n            paymentMethod:cart.paymentMethod,\r\n            itemPrice:cart.itemPrice,\r\n            shippingPrice:cart.shippingPrice,\r\n            taxPrice:cart.taxPrice,\r\n            totalPrice:cart.totalPrice\r\n        }))\r\n        history.push(`/order/${order._id}`)\r\n    }\r\n    useEffect(()=>{\r\n        if(success){\r\n            history.push(`/order/${order._id}`)\r\n        }\r\n        //eslint-disable-next-line\r\n    },[history,success])\r\n    \r\n    return (\r\n        <>\r\n            <Row>\r\n                <Col md={8}>\r\n                    <ListGroup variant=\"flush\">\r\n                        <ListGroup.Item>\r\n                        <h2>Shipping</h2>\r\n                            <p><strong>Adress</strong>\r\n                            {adress}, {city},  {postalcode},  {country}</p>\r\n                        </ListGroup.Item>            \r\n                    <ListGroup.Item>\r\n                        <h2>Payment Method</h2>\r\n                            <p><strong>{cart.paymentMethod}</strong></p>\r\n                    </ListGroup.Item>\r\n                    </ListGroup>\r\n                    <ListGroup variant=\"flush\">\r\n                        <ListGroup.Item><h2>Order Items</h2></ListGroup.Item>\r\n                        {cart.cartItems.length===0 \r\n                        ?(<h3>your Order list is empty!</h3>)\r\n                        :(<ListGroup.Item>\r\n                            {cart.cartItems.map((item,index)=>(\r\n                          <ListGroup.Item key={index}>\r\n                              <Row>\r\n                                  <Col md={1}>\r\n                                      <Image src={item.image} alt={item.title} fluid/>\r\n                                  </Col>\r\n                                  <Col>\r\n                                  <Link to={`/products/product/${item.product}`}>{item.title}</Link>\r\n                                  </Col>\r\n                                  <Col md={4}>\r\n                                      {item.qty} X $ {item.price} = $ {item.qty * item.price}\r\n                                  </Col>\r\n                              </Row>\r\n                          </ListGroup.Item>  \r\n                        ))}\r\n                        </ListGroup.Item>)}\r\n                        \r\n                    </ListGroup>\r\n                                       \r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card>\r\n                    <ListGroup variant=\"flush\">\r\n                        <ListGroup.Item>\r\n                            <h2>Order Summary</h2>\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            <Row>\r\n                                <Col>Items</Col>\r\n                                <Col>$ {cart.itemPrice}</Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col>Shipping</Col>\r\n                                <Col>$ {cart.shippingPrice}</Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col>Tax</Col>\r\n                                <Col>$ {cart.taxPrice}</Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col>Total</Col>\r\n                                <Col>$ {cart.totalPrice}</Col>\r\n                            </Row>\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                        {error&&<h5>{error}</h5>}\r\n                        </ListGroup.Item>\r\n                        <Button \r\n                        variant=\"success\"\r\n                        type=\"button\"\r\n                        onClick={handleClick}\r\n                        disabled={cart.cartItems===0}\r\n                        >Checkout</Button>\r\n                    </ListGroup>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PlaceOrder\r\n"]},"metadata":{},"sourceType":"module"}