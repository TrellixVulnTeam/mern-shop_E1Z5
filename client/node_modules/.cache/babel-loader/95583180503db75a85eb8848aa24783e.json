{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{createOrders}from'../actions/orderAction';import{Row,Col,Button,ListGroup,Image,Card}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlaceOrder=function PlaceOrder(_ref){var history=_ref.history;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var _cart$shippingAdress=cart.shippingAdress,adress=_cart$shippingAdress.adress,city=_cart$shippingAdress.city,postalcode=_cart$shippingAdress.postalcode,country=_cart$shippingAdress.country;var createOrder=useSelector(function(state){return state.createOrder;});var order=createOrder.order,success=createOrder.success,error=createOrder.error;//function for decimal\nvar addDecimal=function addDecimal(num){return Math.round(num*100/100).toFixed(2);};//calculation logic for the Order summary\ncart.itemPrice=addDecimal(cart.cartItems.reduce(function(acc,item){return acc+Number(item.price)*Number(item.qty);},0));cart.shippingPrice=addDecimal(cart.cartItems>100?0:5);cart.taxPrice=addDecimal(0.15*cart.itemPrice);cart.totalPrice=addDecimal(Number(cart.itemPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice));function handleClick(){dispatch(createOrders({orderItems:cart.cartItems,shippingAdress:cart.shippingAdress,paymentMethod:cart.paymentMethod,itemPrice:cart.itemPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));if(success){history.push(\"/order/\".concat(order._id));}}useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));}//eslint-disable-next-line\n},[history,success]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Adress\"}),adress,\", \",city,\",  \",postalcode,\",  \",country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:cart.paymentMethod})})]})]}),/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"})}),cart.cartItems.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"your Order list is empty!\"}):/*#__PURE__*/_jsx(ListGroup.Item,{children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.title,fluid:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/products/product/\".concat(item.product),children:item.title})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" X $ \",item.price,\" = $ \",item.qty*item.price]})]})},index);})})]})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$ \",cart.itemPrice]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$ \",cart.shippingPrice]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$ \",cart.taxPrice]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$ \",cart.totalPrice]})]})]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsx(\"h5\",{children:error})}),/*#__PURE__*/_jsx(Button,{variant:\"success\",type:\"button\",onClick:handleClick,disabled:cart.cartItems===0,children:\"Checkout\"})]})})})]})});};export default PlaceOrder;","map":{"version":3,"sources":["C:/Users/grunge/Desktop/mern-shop/client/src/pages/PlaceOrder.jsx"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrders","Row","Col","Button","ListGroup","Image","Card","PlaceOrder","history","dispatch","cart","state","shippingAdress","adress","city","postalcode","country","createOrder","order","success","error","addDecimal","num","Math","round","toFixed","itemPrice","cartItems","reduce","acc","item","Number","price","qty","shippingPrice","taxPrice","totalPrice","handleClick","orderItems","paymentMethod","push","_id","length","map","index","image","title","product"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {Link} from 'react-router-dom'\r\nimport {createOrders} from '../actions/orderAction'\r\nimport {Row, Col, Button,ListGroup,Image,Card} from 'react-bootstrap'\r\n\r\nconst PlaceOrder = ({history}) => {\r\n\r\n    const dispatch=useDispatch()\r\n    const cart=useSelector(state=>state.cart)      \r\n    const {adress,city,postalcode,country}=cart.shippingAdress\r\n\r\n    const createOrder=useSelector(state=>state.createOrder)\r\n    const {order, success, error}=createOrder\r\n    //function for decimal\r\n    const addDecimal=(num)=>{\r\n        return (Math.round(num * 100 / 100).toFixed(2))\r\n    }\r\n     //calculation logic for the Order summary\r\n    cart.itemPrice=addDecimal(cart.cartItems.reduce((acc,item)=> acc + Number(item.price )* Number(item.qty),0)) \r\n    cart.shippingPrice=addDecimal(cart.cartItems >100 ? 0 : 5)\r\n    cart.taxPrice=addDecimal(0.15 * cart.itemPrice)\r\n    cart.totalPrice=addDecimal(Number(cart.itemPrice)+Number(cart.shippingPrice)+ Number(cart.taxPrice))\r\n    \r\n\r\n    function handleClick(){\r\n        dispatch( createOrders({\r\n            orderItems:cart.cartItems,\r\n            shippingAdress:cart.shippingAdress,\r\n            paymentMethod:cart.paymentMethod,\r\n            itemPrice:cart.itemPrice,\r\n            shippingPrice:cart.shippingPrice,\r\n            taxPrice:cart.taxPrice,\r\n            totalPrice:cart.totalPrice\r\n        }))\r\n        if(success){\r\n            history.push(`/order/${order._id}`)\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        if(success){\r\n            history.push(`/order/${order._id}`)\r\n        }\r\n        //eslint-disable-next-line\r\n    },[history,success])\r\n    \r\n    return (\r\n        <div>\r\n            <Row>\r\n                <Col md={8}>\r\n                    <ListGroup variant=\"flush\">\r\n                        <ListGroup.Item>\r\n                        <h2>Shipping</h2>\r\n                            <p><strong>Adress</strong>\r\n                            {adress}, {city},  {postalcode},  {country}</p>\r\n                        </ListGroup.Item>            \r\n                    <ListGroup.Item>\r\n                        <h2>Payment Method</h2>\r\n                            <p><strong>{cart.paymentMethod}</strong></p>\r\n                    </ListGroup.Item>\r\n                    </ListGroup>\r\n                    <ListGroup variant=\"flush\">\r\n                        <ListGroup.Item><h2>Order Items</h2></ListGroup.Item>\r\n                        {cart.cartItems.length===0 \r\n                        ?(<h3>your Order list is empty!</h3>)\r\n                        :(<ListGroup.Item>\r\n                            {cart.cartItems.map((item,index)=>(\r\n                          <ListGroup.Item key={index}>\r\n                              <Row>\r\n                                  <Col md={1}>\r\n                                      <Image src={item.image} alt={item.title} fluid/>\r\n                                  </Col>\r\n                                  <Col>\r\n                                  <Link to={`/products/product/${item.product}`}>{item.title}</Link>\r\n                                  </Col>\r\n                                  <Col md={4}>\r\n                                      {item.qty} X $ {item.price} = $ {item.qty * item.price}\r\n                                  </Col>\r\n                              </Row>\r\n                          </ListGroup.Item>  \r\n                        ))}\r\n                        </ListGroup.Item>)}\r\n                        \r\n                    </ListGroup>\r\n                                       \r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card>\r\n                    <ListGroup variant=\"flush\">\r\n                        <ListGroup.Item>\r\n                            <h2>Order Summary</h2>\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            <Row>\r\n                                <Col>Items</Col>\r\n                                <Col>$ {cart.itemPrice}</Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col>Shipping</Col>\r\n                                <Col>$ {cart.shippingPrice}</Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col>Tax</Col>\r\n                                <Col>$ {cart.taxPrice}</Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col>Total</Col>\r\n                                <Col>$ {cart.totalPrice}</Col>\r\n                            </Row>\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                        {error&&<h5>{error}</h5>}\r\n                        </ListGroup.Item>\r\n                        <Button \r\n                        variant=\"success\"\r\n                        type=\"button\"\r\n                        onClick={handleClick}\r\n                        disabled={cart.cartItems===0}\r\n                        >Checkout</Button>\r\n                    </ListGroup>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PlaceOrder\r\n"]},"metadata":{},"sourceType":"module"}